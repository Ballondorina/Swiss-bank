<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Swisser.Dev Bank</title>
    <!-- External CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <link rel="stylesheet" href="style.css">
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- Interaction Shield: Unlocks Audio on first click -->
    <div id="interaction-shield" style="position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; z-index: 9999; display: none;"></div>

    <!-- DrawText UI Component -->
    <div id="drawtext-container" class="drawtext-wrapper hidden">
        <div class="drawtext-content">
            <div id="drawtext-key" class="drawtext-key">E</div>
            <div id="drawtext-msg" class="drawtext-text">Interact</div>
            <div id="drawtext-quip" class="drawtext-quip"></div>
        </div>
    </div>

    <div id="app">
        <div class="floating-blobs">
            <span class="blob blob-1"></span>
            <span class="blob blob-2"></span>
            <span class="blob blob-3"></span>
        </div>
        <div class="neon-particles">
            <span></span>
            <span></span>
            <span></span>
            <span></span>
        </div>
        <div id="screensaver-overlay" class="hidden">
            <div class="screensaver-pattern"></div>
            <div class="screensaver-text">Bank in idle mode... tap to wake.</div>
        </div>
        <div id="currency-rain"></div>
        <div id="confetti-layer"></div>
        <!-- Main Banking Dashboard -->
        <div class="main_card animate__animated" id="bank-ui" style="display: none;">
            <div class="main_card-body">
                <div class="sidebar-container">
                    <div class="sidebar-title">
                        <svg class="logo-svg" viewBox="0 0 220 60" xmlns="http://www.w3.org/2000/svg" aria-label="Swisser.Dev logo">
                            <defs>
                                <linearGradient id="logoGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" stop-color="#1f5eff"/>
                                    <stop offset="50%" stop-color="#ff1fb8"/>
                                    <stop offset="100%" stop-color="#00d4a4"/>
                                </linearGradient>
                            </defs>
                            <path d="M20 15 C20 5 42 5 42 15 C42 20 32 22 32 28 C32 33 45 34 45 45 C45 56 20 55 20 45"
                                  fill="none" stroke="url(#logoGradient)" stroke-width="6" stroke-linecap="round"/>
                            <text x="65" y="40" fill="#ffffff" font-weight="800" font-size="28" letter-spacing="2">SWISSER.DEV</text>
                        </svg>
                    </div>
                    
                    <div class="sidebar-item selected" data-page="overview">
                        <i class="fa-solid fa-house"></i> <span id="lbl-overview">Overview</span>
                    </div>
                    <div class="sidebar-item" data-page="transactions">
                        <i class="fa-solid fa-receipt"></i> <span id="lbl-transactions">Transactions</span>
                    </div>
                    <div class="sidebar-item" data-page="transfer">
                        <i class="fa-solid fa-paper-plane"></i> <span id="lbl-transfer">Transfer</span>
                    </div>
                    <div class="sidebar-item" data-page="mailbox">
                        <i class="fa-solid fa-envelope"></i> <span id="lbl-mailbox">Mailbox</span>
                        <span id="mail-badge" class="badge bg-danger hidden" style="margin-left: auto;">0</span>
                    </div>
                    <div class="sidebar-item" data-page="settings">
                        <i class="fa-solid fa-user-shield"></i> <span id="lbl-settings">Settings</span>
                    </div>

                    <div class="mt-4">
                        <label class="sidebar-label" id="lbl-theme">THEME</label>
                        <select class="form-select sidebar-select" id="theme-selector">
                            <option value="midnight">Midnight</option>
                            <option value="neon">Neon</option>
                            <option value="minimal">Minimal</option>
                        </select>
                    </div>

                    <div id="account-switcher-container" class="mt-4 hidden">
                        <label class="sidebar-label" id="lbl-select-account">SELECT ACCOUNT</label>
                        <select class="form-select sidebar-select" id="account-selector"></select>
                    </div>

                    <div id="currency-switcher-container" class="mt-3">
                        <label class="sidebar-label" id="lbl-currency">CURRENCY</label>
                        <div class="currency-dropdown" id="currency-dropdown">
                            <button class="currency-dropdown__toggle" id="currency-dropdown-toggle" type="button">
                                <span id="currency-active-label">US Dollar ($)</span>
                                <i class="fa-solid fa-chevron-down"></i>
                            </button>
                            <div class="currency-dropdown__menu hidden" id="currency-dropdown-menu"></div>
                        </div>
                        <select id="currency-selector" class="hidden"></select>
                    </div>

                    <div style="flex: 1"></div>

                    <div class="sidebar-item" id="btn-exit" style="color: #ef4444; background: rgba(239, 68, 68, 0.05);">
                        <i class="fa-solid fa-power-off"></i> <span id="lbl-exit">Logout</span>
                    </div>
                </div>

                <div class="content-container">
                    <div class="page-title-container">
                        <h2 id="page-title">Overview</h2>
                        <div class="d-flex align-items-center">
                            <span class="username" id="user-name">Loading...</span>
                            <div class="avatar-container">
                                <img id="user-avatar" src="" alt="Avatar" class="user-avatar-img">
                            </div>
                        </div>
                    </div>

                    <div id="page-overview" class="page-content active">
                        <div class="row g-4">
                            <div class="col-md-6">
                                <div class="creditcard-classic_card" id="credit-card-visual">
                                    <div class="card-mesh-bg" id="card-dynamic-bg"></div>
                                    <div class="card-glass-overlay"></div>
                                    <div class="holographic-strip"></div>
                                    <div class="creditcard-classic_card-body">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <span id="card-brand-text" style="font-weight: 800; letter-spacing: 2px; font-size: 18px;">SWISSER.DEV</span>
                                            <i class="fa-solid fa-wifi" style="font-size: 20px; opacity: 0.6;"></i>
                                        </div>
                                        <div class="card-number-block">
                                            <div class="card-number-display">
                                                **** **** **** 4291
                                            </div>
                                        </div>
                                        <div class="mt-auto d-flex justify-content-between align-items-end">
                                            <div>
                                                <div id="lbl-card-number" style="font-size: 11px; opacity: 0.6; text-transform: uppercase; letter-spacing: 1px;">Account Number</div>
                                                <div id="card-iban" style="font-size: 18px; font-weight: 600;">SE00 0000</div>
                                            </div>
                                            <div id="card-tier-label">STANDARD</div>
                                        </div>
                                    </div>
                                    <div class="creditcard-classic_card-back" id="card-back">
                                        <div class="card-back-sticker" id="card-slogan">Bank Champ</div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card balance-card">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <div style="font-size: 16px; opacity: 0.5; font-weight: 600;" id="lbl-balance">Total Balance</div>
                                        <i class="fa-solid fa-eye-slash" id="toggle-balance" style="cursor: pointer; opacity: 0.5; font-size: 18px;"></i>
                                    </div>
                                    <h1 id="display-balance">0 kr</h1>
                                    <div class="row mt-4 g-3">
                                        <div class="col-6">
                                            <input type="text" class="form-control" id="inp-deposit" placeholder="Amount" inputmode="numeric" pattern="[0-9,]*">
                                            <button class="btn btn-blue" id="btn-deposit">Deposit</button>
                                        </div>
                                        <div class="col-6">
                                            <input type="text" class="form-control" id="inp-withdraw" placeholder="Amount" inputmode="numeric" pattern="[0-9,]*">
                                            <button class="btn btn-blue" id="btn-withdraw" style="background: #2a2b33;">Withdraw</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row mt-5">
                            <div class="col-md-8">
                                <h4 id="lbl-analysis-title" style="font-weight: 800; margin-bottom: 20px; opacity: 0.8;">Financial Analysis</h4>
                                <div style="background: #1f2027; border-radius: 20px; padding: 25px; height: 280px; border: 1px solid rgba(255,255,255,0.03);">
                                    <canvas id="transactionChart"></canvas>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <h4 id="lbl-savings-goal-title" style="font-weight: 800; margin-bottom: 20px; opacity: 0.8;">Savings Goal</h4>
                                <div class="card goal-card" style="background: #1f2027; border-radius: 20px; padding: 25px; border: 1px solid rgba(255,255,255,0.03); height: 280px; display: flex; flex-direction: column;">
                                    <div id="goal-title" style="font-size: 20px; font-weight: 700;">Goal Name</div>
                                    <div class="progress mt-4" style="height: 12px; border-radius: 10px; background: rgba(255,255,255,0.05);">
                                        <div id="goal-progress-bar" class="progress-bar" role="progressbar" style="width: 0%; background: #1f5eff; border-radius: 10px;"></div>
                                    </div>
                                    <div class="d-flex justify-content-between mt-3">
                                        <span id="goal-current" style="font-size: 18px; font-weight: 700;">0 kr</span>
                                        <span id="goal-target" style="opacity: 0.4;">/ 0 kr</span>
                                    </div>
                                    <div class="mt-auto">
                                        <button class="btn btn-blue" id="btn-goal-settings" style="background: rgba(255,255,255,0.05); color: white;" onclick="toggleGoalEdit()">Settings</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="page-transactions" class="page-content hidden">
                        <div class="transaction-scroll-area" id="transaction-list"></div>
                    </div>

                    <div id="page-transfer" class="page-content hidden">
                        <div class="row justify-content-center">
                            <div class="col-md-8">
                                <div class="card p-5" style="background: #1f2027; border-radius: 25px; border: 1px solid rgba(255,255,255,0.03);">
                                    <h3 id="lbl-quick-transfer" style="font-weight: 800; margin-bottom: 30px;">Quick Transfer</h3>
                                    <div class="mb-4">
                                        <label class="form-label" id="lbl-transfer-iban" style="opacity: 0.5;">Recipient IBAN / Account Number</label>
                                        <input type="text" class="form-control" id="inp-transfer-iban" placeholder="SE00 0000...">
                                        <div id="iban-feedback" class="form-text muted-text"></div>
                                    </div>
                                    <div class="mb-4">
                                        <label class="form-label" id="lbl-transfer-amount" style="opacity: 0.5;">Amount to send</label>
                                        <input type="number" class="form-control" id="inp-transfer-amount" placeholder="0">
                                    </div>
                                    <button class="btn btn-blue mt-3 disabled" id="btn-transfer" disabled>Send Funds</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="page-mailbox" class="page-content hidden">
                        <div id="mail-list" class="transaction-scroll-area"></div>
                    </div>

                    <div id="page-settings" class="page-content hidden">
                        <div class="row g-4">
                            <div class="col-md-6">
                                <div class="card p-4" style="background: #1f2027; border-radius: 20px; border: 1px solid rgba(255,255,255,0.03);">
                                    <h4 id="lbl-security-title" style="font-weight: 800; margin-bottom: 20px;">Security Code</h4>
                                    <p id="lbl-pin-warning" style="font-size: 13px; color: #ef4444; margin-bottom: 20px;"></p>
                                    <input type="password" class="form-control" id="inp-current-pin" placeholder="Current PIN">
                                    <input type="password" class="form-control" id="inp-new-pin" placeholder="New PIN (4 digits)">
                                    <input type="password" class="form-control" id="inp-confirm-pin" placeholder="Confirm new PIN">
                                    <button class="btn btn-blue mt-3" id="btn-change-pin">Update Code</button>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card p-4" style="background: #1f2027; border-radius: 20px; border: 1px solid rgba(255,255,255,0.03);">
                                    <h4 id="lbl-card-design-title" style="font-weight: 800; margin-bottom: 20px;">Card Design</h4>
                                    <p id="lbl-card-cost" style="font-size: 13px; color: #ef4444; margin-bottom: 20px;"></p>
                                    <input type="text" class="form-control" id="inp-card-url" placeholder="Image URL (Direct link)">
                                    <button class="btn btn-blue mt-3" id="btn-order-card">Order New Design</button>
                                    <button class="btn btn-secondary w-100 mt-2 hidden" id="btn-remove-card" style="background: transparent; border: 1px solid rgba(255,255,255,0.1);">Reset Default</button>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card p-4" style="background: #1f2027; border-radius: 20px; border: 1px solid rgba(255,255,255,0.03);">
                                    <h4 id="lbl-avatar-title" style="font-weight: 800; margin-bottom: 20px;">Profile Picture</h4>
                                    <input type="text" class="form-control" id="inp-avatar-url" placeholder="Image URL">
                                    <button class="btn btn-blue mt-3" id="btn-update-avatar">Update Avatar</button>
                                    <button class="btn btn-secondary w-100 mt-2 hidden" id="btn-remove-avatar" style="background: transparent; border: 1px solid rgba(255,255,255,0.1);">Reset Default</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Savings Goal Modal -->
        <div id="goal-modal" class="modal-overlay hidden">
            <div class="modal-content animate__animated animate__zoomIn">
                <h3 id="lbl-update-goal-title" style="font-weight: 800; margin-bottom: 25px;">Update Savings Goal</h3>
                <div class="mb-4">
                    <label class="form-label" id="lbl-goal-name" style="opacity: 0.5;">Goal Name</label>
                    <input type="text" class="form-control" id="inp-goal-title" placeholder="e.g. New Car">
                </div>
                <div class="mb-4">
                    <label class="form-label" id="lbl-goal-target" style="opacity: 0.5;">Target Amount</label>
                    <input type="number" class="form-control" id="inp-goal-target" placeholder="0">
                </div>
                <div class="d-flex gap-3">
                    <button class="btn btn-blue flex-grow-1" id="btn-save-goal" onclick="saveGoal()">Save Goal</button>
                    <button class="btn btn-secondary" id="btn-cancel-goal" style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);" onclick="toggleGoalEdit()">Cancel</button>
                </div>
            </div>
        </div>

        <!-- ATM PIN Pad Interface -->
        <div id="atm-container" style="display: none;">
            <div class="atm_card animate__animated" id="atm-ui">
                <div class="atm-vignette" id="atm-vignette"></div>
                <div class="atm-brand">ATM TERMINAL</div>
                <div class="dots-container">
                    <div class="dot" id="dot-1"></div>
                    <div class="dot" id="dot-2"></div>
                    <div class="dot" id="dot-3"></div>
                    <div class="dot" id="dot-4"></div>
                </div>
                <div class="atm-quip" id="atm-quip"></div>
                <div class="pin-grid">
                    <div class="pin-number" data-pin="1">1</div>
                    <div class="pin-number" data-pin="2">2</div>
                    <div class="pin-number" data-pin="3">3</div>
                    <div class="pin-number" data-pin="4">4</div>
                    <div class="pin-number" data-pin="5">5</div>
                    <div class="pin-number" data-pin="6">6</div>
                    <div class="pin-number" data-pin="7">7</div>
                    <div class="pin-number" data-pin="8">8</div>
                    <div class="pin-number" data-pin="9">9</div>
                    <div class="pin-number pin-cancel" data-pin="clear">C</div>
                    <div class="pin-number" data-pin="0">0</div>
                    <div class="pin-number pin-ok" data-submit="true">OK</div>
                </div>
            </div>
        </div>
    </div>
    <script src="script.js"></script>
</body>
</html>